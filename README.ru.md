# Кастомный ремап стрелок / Copilot / Shift (AutoHotkey v2)

[English version / Английская версия](README.md)

## Зачем

На моем новом ноутбуке постоянно вместо стрелки «Влево» нажимаю соседнюю Copilot. Она открывает панель на пол экрана и ломает концентрацию. Поэтому я переназначил несколько клавиш, чтобы вернуть удобную навигацию в левом нижнем углу.

Дополнительно хотелось, чтобы переназначенные клавиши вели себя как нормальные стрелки в редакторах и терминалах:
- `Shift + стрелка` продолжает выделять текст.
- `Ctrl + стрелка` продолжает прыгать по словам / токенам.
- `Ctrl + Shift + стрелка` продолжает выделять по словам.

Обновлённый скрипт сохраняет все эти стандартные сочетания и на новых «стрелках».

## Что изменено

| Физическая клавиша       | Теперь выполняет | Примечание                         |
|--------------------------|------------------|------------------------------------|
| Copilot (Win+Shift+F23)  | Стрелка Влево    | Становится единственной «Влево».  |
| Правый Shift             | Стрелка Вверх    | Вверх дублируется: ↑ + Right Shift. |
| Стрелка Вниз             | Стрелка Вправо   | Вправо дублируется: → + бывшая ↓. |
| Стрелка Влево            | Стрелка Вниз     | «Вниз» переезжает на место «Влево». |

Итоговая раскладка:
- Вверх: обычная ↑ и Right Shift.
- Вправо: обычная → и бывшая ↓.
- Вниз: бывшая ←.
- Влево: Copilot.  
(Оригинальные ↑ и → не трогаются.)

## Поведение с модификаторами (Shift / Ctrl / Alt)

Во всех отправках стрелок используется форма `Send "{Blind}{...}"`.  
Это важно, потому что:

- При зажатом **Shift** и нажатии переназначенной клавиши выделение текста продолжает работать.
- При зажатом **Ctrl** курсор всё так же двигается по словам / токенам.
- **Ctrl + Shift** выделяет по словам, как обычно.
- Любое поведение **Alt + стрелка**, настроенное в редакторе (мультикурсор, блоки и т.п.), также сохраняется.

То есть для системы и редактора всё выглядит как обычные сочетания `Shift+Left`, `Ctrl+Right` и пр., просто «стрелка» теперь приезжает с других физических клавиш.

## Требования

- Windows 10 / 11
- [AutoHotkey v2](https://www.autohotkey.com/)

## Установка AutoHotkey

1. Перейдите на сайт [AutoHotkey](https://www.autohotkey.com/).
2. Нажмите Download → Download v2.
3. Установите.

## Скрипты

Два варианта:
1. С F12 (быстрый выход).
2. Без F12 (минимализм).

Сохраните выбранный как `remap_arrows.ahk`.

### Вариант 1 (с F12)

```ahk
#Requires AutoHotkey v2.0
#SingleInstance Force
*<#<+F23::{
    Send "{Blind}{LShift up}{LWin up}"
    Send "{Left}"
    Sleep 400
    while GetKeyState("F23","P"){
        Send "{Left}"
        Sleep 30
    }
}
*RShift::{
    Send "{Up}"
    Sleep 400
    while GetKeyState("RShift","P"){
        Send "{Up}"
        Sleep 30
    }
}
*Down::{
    Send "{Right}"
    Sleep 400
    while GetKeyState("Down","P"){
        Send "{Right}"
        Sleep 30
    }
}
*Left::{
    Send "{Down}"
    Sleep 400
    while GetKeyState("Left","P"){
        Send "{Down}"
        Sleep 30
    }
}
F12::ExitApp
```

### Вариант 2 (без F12)

```ahk
#Requires AutoHotkey v2.0
#SingleInstance Force
*<#<+F23::{
    Send "{Blind}{LShift up}{LWin up}"
    Send "{Left}"
    Sleep 400
    while GetKeyState("F23","P"){
        Send "{Left}"
        Sleep 30
    }
}
*RShift::{
    Send "{Up}"
    Sleep 400
    while GetKeyState("RShift","P"){
        Send "{Up}"
        Sleep 30
    }
}
*Down::{
    Send "{Right}"
    Sleep 400
    while GetKeyState("Down","P"){
        Send "{Right}"
        Sleep 30
    }
}
*Left::{
    Send "{Down}"
    Sleep 400
    while GetKeyState("Left","P"){
        Send "{Down}"
        Sleep 30
    }
}
```

### Как работает

- Copilot шлёт Win+Shift+F23. Скрипт «отпускает» Win и Shift, чтобы не было выделения (`Shift+Left`) или привязки окна (`Win+Left`).
- Сначала срабатывает одно «нажатие», затем после паузы (`Sleep 400`) запускается быстрый автоповтор (`Sleep 30`).
- Остальные клавиши используют такой же цикл автоповтора.
- Использование `{Blind}` сохраняет состояние всех модификаторов (Shift / Ctrl / Alt), так что стандартное поведение сочетаний на переназначенных клавишах не ломается.

### Настройка скорости

- `Sleep 400` — задержка перед серией (как у стандартной клавиатуры).
- `Sleep 30` — интервал между повторами (меньше = быстрее, можно ставить 20, 50 и т.п.).

## Запуск

Двойной клик по `.ahk` файлу. Зелёная иконка H в трее — скрипт активен.

## Автозапуск

1. `Win + R`
2. Ввести: `shell:startup` → Enter
3. Положить ярлык `.ahk` файла в открывшуюся папку (правый drag → «Создать ярлык здесь»).
4. После входа в систему скрипт стартует сам.

## Советы

- Если скрипт игнорируется каким‑то приложением — запустите от имени администратора.
- Перезагрузка после правки: правый клик по иконке → Reload Script.
- В варианте с F12 можно быстро отключить ремап.

## Отказ от ответственности

Скрипт меняет поведение клавиш только пока запущен. Закрыли — всё вернулось к штатной раскладке. Используйте на свой страх и риск (по сути безопасно, но нестандартно).

## Лицензия

Свободное использование и модификация. Ссылка на репозиторий приветствуется.

Удачной навигации!
